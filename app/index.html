<!doctype html>
<html class="no-js">
<head>
  <meta charset="utf-8">
  <title>paw2017a1frontend</title>
  <meta name="description" content="">



  <!-- build:css(.tmp) styles/main.css -->
  <link rel="stylesheet" href="styles/index.css">
   <!-- endbuild -->

    <!-- build:css(.tmp) styles/main.css -->
  <link rel="stylesheet" href="styles/loginregister.css">
   <!-- endbuild -->

  <!-- build:css(.tmp) styles/main.css -->
  <link rel="stylesheet" href="styles/typeaheadjs.css">
   <!-- endbuild -->

    <!-- build:css(.tmp) styles/main.css -->
  <link rel="stylesheet" href="styles/main.css">
   <!-- endbuild -->

  <meta name="robots" content="noindex">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script type="text/javascript">

  contextPath='';

  </script>
</head>
<body ng-controller="IndexCtrl">

<nav ng-show = "showNavBar"
  class="navbar main_navbar sticky-top navbar-collapse navbar-toggleable-md navbar-inverse bg-inverse">

    <div class="navbar-header">
        <a ng-if="user != null" class="navbar-brand"  href="#!/">
            <img alt="logo" width="150" src="images/vaporw.png" />
        </a>
        <a ng-if="user == null" class="navbar-brand"  href="#!/welcome">
              <img alt="logo" width="150" src="images/vaporw.png" />
        </a>

    </div>

    <ul class="navbar-nav mr-auto">

    </ul>

  <div ng-if="isLoggedIn">
      <div style="float:right;" class="dropdown">
        <button class="btn navbar_profile_button" type="button" style="background-color: rgb(41,43,44);" id="dropdownMenuButton" data-toggle="dropdown">
          <img
            ng-src="/user/avatar/{{user.name}}"
            class="img-rounded navbar_profile_avatar clickable" style="border: 1px solid rgb(247,247,247);">
        </button>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton" >
          <a class="dropdown-item"
            ng-href="/user/{{user.name}}"><strong>{{user.name}}</strong><br /> View my profile</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="/changepic">Update your Avatar</a>
          <div ng-if="user.steamId == null || user.steamId == 0">
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="/steam-link">Link with your Steam account</a>
          </div>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item">
              <button ng-click = "logOut()">  {{'LOG_OUT' | translate}}</button>
          </a>
        </div>
      </div>
      <div  style="float:right;" ng-if="user.notifications != null" class="dropdown">
        <button class="btn navbar_profile_button" type="button" id="notificationsDropdown" data-toggle="dropdown" style="background-color: rgb(41,43,44); color: rgb(247,247,247);">
          <i class="fa fa-bell fa-lg" aria-hidden="true">{{user.notifications.length}}</i>
        </button>
        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="notificationsDropdown" style="height: auto; max-height: 30em; width: 25em;word-break: break-all;">
          <div class="dropdown-item">
            <h4 style="text-align: center;">Notifications</h4>
          </div>
          <div class="dropdown-divider"></div>
            <div ng-if="user.notifications.length == 0" class="dropdown-item">
              You don't have new notifications
            </div>
            <div ng-if="user.notifications.length != 0" >
              <div ng-repeat="notif in user.notifications"  varStatus="gen">
                      <div ng-if="notif.type == 'FOLLOWED' " class="dropdown-item">
                        <p style="word-break: break-word; white-space:normal;">
                      <a ng-href="/folnotif?id={{notif.id}}">
                          <i class="fa fa-user-plus" aria-hidden="true"></i>
                          {{notif.follower.name}}
                          followed you
                      </a>
                    </p>
                  </div>
                      <div ng-if="notif.type == 'SHARED' " class="dropdown-item">
                        <p style="word-break: normal; white-space:normal;">
                      <a ng-href="/msgnotif?id={{notif.id}}">
                            <i class="fa fa-retweet" aria-hidden="true"></i>
                          <div ng-repeat = "sharer in notif.sharers" >
                            {{sharer.user.name}}
                            <span ng-if="$index == notif.sharers.length - 2" > and </span>
                            <span ng-if="$index < notif.sharers.length - 2"> , </span>
                          </div>
                          shared your message
                          <em style="color: blue;">{{notif.message.title}}</em>
                      </a>
                    </p>
                  </div>
                      <div ng-if="notif.type == 'REPLIED' " class="dropdown-item">
                        <p style="word-break: normal; white-space:normal;">
                      <a ng-href="/msgnotif?id={{notif.id}}">
                          <i class="fa fa-reply" aria-hidden="true"></i>
                        <div ng-repeat="replier in notif.repliers">
                          {{replier.user.name}}
                          <span ng-if="$index == notif.repliers.length - 2" > and </span>
                          <span ng-if="$index < notif.repliers.length - 2"> , </span>
                        </div>
                        replied your message
                        <em style="color: blue;">{{notif.message.title}}</em>
                      </a>
                    </p>
                  </div>
                </div>
                <div ng-if="$index != user.notifications.length - 1" class="dropdown-divider"></div>
            </div>
        </div>
      </div>
      <div style="float: right" >
            <a id="trendings" href="/trendings"><h5
                class="white clickable">
                <i class="fa fa-line-chart fa-lg" aria-hidden="true" id="trendings-icon"></i>
              </h5></a>


      </div>
      <form  style="float:right;" class="autocomplete form-inline my-2 my-lg-0" action="/search" method="get" >
        <input style="width: 20rem" class="search typeahead form-control mr-sm-2" type="text" placeholder="Search games, users and messages" name="term"/>
      </form>
    </div>


    <div ng-if="!isLoggedIn">
      <div style="float: right">
        <a id="login" href="#!/login"><h5
            class="white clickable">
            Login
          </h5></a>
      </div>

      <div style="float: right" id ="registerNavDiv">
          <a id="register" href="#!/register"><h5
              class="white clickable">
              Register
            </h5></a>


      </div>
    </div>
</nav>
  <!--[if lt IE 7]>
  <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
  <![endif]-->
  <!-- Add your site or application content here -->
  <div class="container">

    <div ng-view=""></div>


  </div>

  <!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
  <script>
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
   })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

   ga('create', 'UA-XXXXX-X');
   ga('send', 'pageview');
 </script>

 <!-- build:js(.) scripts/oldieshim.js -->
  <!--[if lt IE 9]>
  <script src="bower_components/es5-shim/es5-shim.js"></script>
  <script src="bower_components/json3/lib/json3.js"></script>
  <![endif]-->
  <!-- endbuild -->
  <script src="/scripts/paths.js"></script>
  <script src="bower_components/requirejs/require.js" data-main="/scripts/build.js"></script>
</body>
</html>
